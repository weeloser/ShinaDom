<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ШинаДом - Профессиональный Шиномонтаж</title>
    <link rel="icon" href="https://i.postimg.cc/C1hpVcxb/image.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712; 
            color: #f9fafb;
            background-image: linear-gradient(to bottom right, #030712, #111827, #030712);
            overflow-x: hidden;
        }
        .hero-parallax {
            background-image: url('https://i.postimg.cc/W4QNn4y3/image-1.webp');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
        }
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        [data-aos] {
            transition-property: transform, opacity;
        }
        
        @keyframes pulse-slow {
          50% {
            transform: scale(1.03);
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.4); 
          }
        }
        .animate-pulse-slow {
            animation: pulse-slow 2.5s infinite ease-in-out;
        }
        
        .quiz-step {
            transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .quiz-step.hidden {
            opacity: 0;
            transform: translateX(30px);
            pointer-events: none;
            position: absolute;
        }
        .quiz-step.active {
            opacity: 1;
            transform: translateX(0);
            position: static;
        }
        .quiz-step.hidden-left {
            opacity: 0;
            transform: translateX(-30px);
            pointer-events: none;
            position: absolute;
        }
        
        .quiz-option-btn:active, .quiz-back-btn:active, #quiz-to-confirm:active, #quiz-confirm:active, #complex-btn:active, #complex-reset-btn:active {
            transform: scale(0.97);
            transition-duration: 0.1s;
        }
        
        #quiz-container {
            transition: height 0.3s ease-in-out;
        }
        
        .custom-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2322d3ee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-chevron-down'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
        }
        
        .service-icon {
            transition: transform 0.3s ease;
        }
        .service-card:hover .service-icon {
            transform: translateY(-4px) scale(1.05);
        }
        
        .price-list-item {
            transition: background-color 0.2s ease, transform 0.2s ease;
        }
        .price-list-item:hover {
            background-color: #1f2937;
            transform: translateX(5px);
        }

        .svg-anim-part {
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .glass-header {
            background-color: rgba(3, 7, 18, 0.6); 
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(55, 65, 81, 0.5); 
        }

        .glass-card {
            background-color: rgba(17, 24, 39, 0.6); 
            backdrop-filter: blur(12px);
            border: 1px solid rgba(55, 65, 81, 0.5); 
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            background-color: rgba(31, 41, 55, 0.7); 
            border-color: rgba(34, 211, 238, 0.5); 
        }
        
        .glass-modal {
             background-color: rgba(31, 41, 55, 0.8); 
            backdrop-filter: blur(12px);
            border: 1px solid rgba(75, 85, 99, 0.5); 
        }
        
        .glass-button {
            background-color: rgba(17, 24, 39, 0.6); 
            backdrop-filter: blur(8px);
            border-color: rgba(55, 65, 81, 0.5); 
            transition: all 0.2s ease;
        }
        .glass-button:hover {
            background-color: rgba(31, 41, 55, 0.7); 
            border-color: #22d3ee;
        }
        .glass-button.selected {
            background-color: #22d3ee;
            color: #111827;
            font-weight: bold;
            border-color: #22d3ee;
            backdrop-filter: none;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spinning-group {
            animation: spin 5s linear infinite;
        }
        
        .bg-gray-900 { background-color: #111827; }
        .bg-gray-800 { background-color: #1f2937; }
        .text-cyan-400 { color: #22d3ee; }
        .hover\:text-cyan-400:hover { color: #22d3ee; }
        .bg-cyan-400 { background-color: #22d3ee; }
        .hover\:bg-cyan-300:hover { background-color: #67e8f9; }
        .hover\:shadow-cyan-400\/30:hover { --tw-shadow-color: rgba(34, 211, 238, 0.3); --tw-shadow: var(--tw-shadow-colored); }
        .border-cyan-400 { border-color: #22d3ee; }
        .focus\:border-cyan-400:focus { border-color: #22d3ee; }
        .focus\:ring-cyan-400:focus { --tw-ring-color: #22d3ee; }
        .text-cyan-300 { color: #67e8f9; }
        .hover\:text-cyan-300:hover { color: #67e8f9; }
        .text-green-400 { color: #4ade80; }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <header class="fixed top-0 left-0 right-0 z-50 glass-header" data-aos="fade-down">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-black text-cyan-400 transition-transform transform hover:scale-110 hover:drop-shadow-[0_0_10px_#22d3ee]">ШИНАДОМ</a>
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#services" class="hover:text-cyan-400 transition duration-300 transform hover:scale-110 inline-block">Услуги</a>
                <a href="#pricing" class="hover:text-cyan-400 transition duration-300 transform hover:scale-110 inline-block">Цены</a>
                <a href="#contact" class="hover:text-cyan-400 transition duration-300 transform hover:scale-110 inline-block">Контакты</a>
                <a href="#contact" class="bg-cyan-400 text-gray-900 font-bold py-2 px-5 rounded-lg shadow-md hover:bg-cyan-300 transition duration-300 transform hover:scale-105">
                    Записаться
                </a>
            </div>
            <div class="md:hidden">
                <a href="#contact" class="bg-cyan-400 text-gray-900 font-bold py-2 px-4 rounded-lg shadow-md hover:bg-cyan-300 transition duration-300">
                    Связь
                </a>
            </div>
        </nav>
        <div id="scroll-progress-bar" class="fixed top-[65px] left-0 z-50 h-1 bg-cyan-400 shadow-[0_0_10px_#22d3ee]" style="width: 0%;"></div>
    </header>

    <main>
        <section id="hero" class="hero-parallax h-screen flex items-center justify-center text-center relative">
            <div class="absolute inset-0 bg-black opacity-60"></div>
            <div class="relative z-10 px-4" data-aos="fade-up">
                <h1 class="text-6xl md:text-8xl lg:text-9xl font-black uppercase text-shadow">ШИНАДОМ</h1>
                <p class="text-xl md:text-3xl font-light mt-4 mb-10 text-gray-200 text-shadow">Переобуем всех! Быстро. Четко. Без очередей.</p>
                <div class="flex flex-col sm:flex-row justify-center gap-4" data-aos="fade-up" data-aos-delay="300">
                    <a href="https://wa.me/79027513964" target="_blank" class="bg-green-500 text-white font-bold py-4 px-8 rounded-lg shadow-xl hover:bg-green-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 animate-pulse-slow">
                        <i data-lucide="smartphone"></i>
                        Написать в WhatsApp
                    </a>
                    <a href="https://t.me/+79027513964" target="_blank" class="bg-blue-500 text-white font-bold py-4 px-8 rounded-lg shadow-xl hover:bg-blue-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 animate-pulse-slow">
                        <i data-lucide="send"></i>
                        Написать в Telegram
                    </a>
                    <a href="tel:+79029093879" class="bg-cyan-400 text-gray-900 font-bold py-4 px-8 rounded-lg shadow-xl hover:bg-cyan-300 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 animate-pulse-slow">
                        <i data-lucide="phone-call"></i>
                        Позвонить
                    </a>
                </div>
            </div>
            <div class="absolute bottom-10 z-10" data-aos="fade-up" data-aos-delay="500">
                <i data-lucide="arrow-down" class="animate-bounce h-10 w-10"></i>
            </div>
        </section>

        <section id="services" class="py-20 bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12" data-aos="fade-up">Наши Услуги</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="glass-card p-8 rounded-xl shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:shadow-lg hover:shadow-cyan-400/30 service-card" data-aos="fade-up" data-aos-delay="100">
                        <div class="text-cyan-400 mb-4 service-icon">
                            <i data-lucide="replace" class="h-12 w-12"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Сезонная "переобувка"</h3>
                        <p class="text-gray-400">Полный комплекс: снятие, мойка, демонтаж, монтаж, балансировка и установка.</p>
                    </div>
                    <div class="glass-card p-8 rounded-xl shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:shadow-lg hover:shadow-cyan-400/30 service-card" data-aos="fade-up" data-aos-delay="200">
                        <div class="text-cyan-400 mb-4 service-icon">
                            <i data-lucide="wrench" class="h-12 w-12"></i> 
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Ремонт проколов и порезов</h3>
                        <p class="text-gray-400">Ремонтируем боковые порезы и проколы любой сложности. Быстро и надежно.</p>
                    </div>
                    <div class="glass-card p-8 rounded-xl shadow-2xl transition-all duration-300 transform hover:-translate-y-2 hover:shadow-lg hover:shadow-cyan-400/30 service-card" data-aos="fade-up" data-aos-delay="300">
                        <div class="text-cyan-400 mb-4 service-icon">
                            <i data-lucide="circle-dashed" class="h-12 w-12"></i>
                        </div>
                        <h3 class="text-2xl font-bold mb-3">Балансировка</h3>
                        <p class="text-gray-400">Точная балансировка на современном оборудовании. Устраняем биение руля.</p>
                    </div>
                </div>
            </div>
        </section>

        <div id="why-us-container" class="h-[300vh] relative">
            <section id="why-us" class="py-20 bg-gray-900 sticky top-0 h-screen flex items-center">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl font-bold mb-12 pt-16" data-aos="fade-in">Наш подход</h2>
                    <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-12 items-center text-left">
                        <div class="mt-8 md:mt-0">
                            <div class="flex items-center gap-4 mb-3" data-aos="fade-right" data-aos-delay="100">
                                <i data-lucide="clock" class="h-8 w-8 text-cyan-400"></i>
                                <h3 class="text-2xl font-bold">Работаем быстро</h3>
                            </div>
                            <p class="text-gray-300" data-aos="fade-right" data-aos-delay="200">Ваше время — наш приоритет. Забудьте об очередях. Мы ценим каждую вашу минуту и работаем на результат.</p>
                        </div>
                        <div id="wheel-container" class="w-full h-full min-h-[300px] max-w-[70%] mx-auto">
                            <svg id="wheel" viewBox="-100 -100 200 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-full h-full">
                                <defs>
                                    <radialGradient id="tireGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                        <stop offset="0%" style="stop-color:#383838; stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#1c1c1c; stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#000000; stop-opacity:1" />
                                    </radialGradient>
                                    <pattern id="treadPattern" patternUnits="userSpaceOnUse" width="10" height="10" x="0" y="0">
                                        <rect width="6" height="10" fill="#030303" opacity="0.6"/>
                                    </pattern>
                                    <linearGradient id="rimMainGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#67e8f9; stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#22d3ee; stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#0e7490; stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="rimDarkGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:#374151; stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#1f2937; stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#111827; stop-opacity:1" />
                                    </linearGradient>
                                    <linearGradient id="spokeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#1f2937; stop-opacity:1" />
                                        <stop offset="40%" style="stop-color:#22d3ee; stop-opacity:1" />
                                        <stop offset="60%" style="stop-color:#22d3ee; stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#1f2937; stop-opacity:1" />
                                    </linearGradient>
                                    <radialGradient id="hubGradient" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                                        <stop offset="0%" style="stop-color:#67e8f9; stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#22d3ee; stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#111827; stop-opacity:1" />
                                    </radialGradient>
                                    <filter id="deepShadow">
                                        <feDropShadow dx="3" dy="3" stdDeviation="4" flood-color="#000" flood-opacity="0.5"/>
                                    </filter>
                                    <filter id="softInnerShadow">
                                        <feOffset dx="0" dy="0"/>
                                        <feGaussianBlur stdDeviation="4" result="offset-blur"/>
                                        <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse-mask"/>
                                        <feFlood flood-color="#000" flood-opacity="0.4" result="color"/>
                                        <feComposite operator="in" in="color" in2="inverse-mask" result="shadow"/>
                                        <feComposite operator="over" in="shadow" in2="SourceGraphic"/>
                                    </filter>
                                    <path id="spoke" d="M 0 -28 C 10 -48, 10 -68, 0 -83 C -10 -68, -10 -48, 0 -28 Z" 
                                          fill="url(#spokeGradient)" 
                                          stroke="#111827" 
                                          stroke-width="0.8"
                                          filter="url(#deepShadow)"/>
                                    <circle id="bolt" cx="18" cy="0" r="4" fill="#374151" stroke="#111827" stroke-width="0.6" filter="url(#deepShadow)"/>
                                </defs>
                                <g id="wheel-group">
                                    <circle cx="0" cy="0" r="98" fill="url(#tireGradient)" stroke="#000" stroke-width="2.5" filter="url(#deepShadow)"/>
                                    <circle cx="0" cy="0" r="98" fill="url(#treadPattern)" fill-opacity="0.4"/>
                                    <circle cx="0" cy="0" r="90" fill="url(#rimMainGradient)" stroke="#0e7490" stroke-width="1.2" filter="url(#deepShadow)"/>
                                    <circle cx="0" cy="0" r="87" fill="url(#rimDarkGradient)" stroke="none" filter="url(#softInnerShadow)"/>
                                    <circle cx="0" cy="0" r="84" fill="url(#rimMainGradient)" stroke="#0e7490" stroke-width="0.6" filter="url(#softInnerShadow)"/>
                                    <g id="spokes">
                                        <use xlink:href="#spoke" />
                                        <use xlink:href="#spoke" transform="rotate(72)" />
                                        <use xlink:href="#spoke" transform="rotate(144)" />
                                        <use xlink:href="#spoke" transform="rotate(216)" />
                                        <use xlink:href="#spoke" transform="rotate(288)" />
                                    </g>
                                    <circle cx="0" cy="0" r="32" fill="url(#hubGradient)" stroke="#111827" stroke-width="1.8" filter="url(#deepShadow)"/>
                                    <circle cx="0" cy="0" r="28" fill="url(#rimDarkGradient)" stroke="none" filter="url(#softInnerShadow)"/>
                                    <circle cx="0" cy="0" r="18" fill="url(#rimMainGradient)" stroke="#0e7490" stroke-width="0.7"/>
                                    <g id="bolts">
                                        <use xlink:href="#bolt" />
                                        <use xlink:href="#bolt" transform="rotate(72)"/>
                                        <use xlink:href="#bolt" transform="rotate(144)"/>
                                        <use xlink:href="#bolt" transform="rotate(216)"/>
                                        <use xlink:href="#bolt" transform="rotate(288)"/>
                                    </g>
                                    <circle cx="0" cy="0" r="8" fill="#1f2937" stroke="#111827" stroke-width="1"/>
                                    <circle cx="0" cy="0" r="4" fill="#22d3ee" />
                                </g>
                            </svg>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <section id="pricing" class="py-20 bg-gray-800">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl font-bold mb-12" data-aos="fade-up">Расчет стоимости</h2>
                <div class="max-w-4xl mx-auto" data-aos="zoom-in">
                    <p class="text-xl text-gray-300 mb-8" data-aos="fade-up" data-aos-delay="100">
                        Узнайте точную стоимость услуг для вашего автомобиля. 
                        Воспользуйтесь нашим калькулятором или посмотрите цены на дополнительные услуги ниже.
                    </p>
                    <button id="openPriceCalculator" class="bg-cyan-400 text-gray-900 font-bold py-4 px-10 rounded-lg shadow-xl hover:bg-cyan-300 transition duration-300 transform hover:scale-105 text-xl">
                        <i data-lucide="calculator" class="inline-block -mt-1 mr-2"></i>
                        Открыть калькулятор
                    </button>
                </div>

                <div class="max-w-5xl mx-auto mt-20 grid md:grid-cols-2 gap-12 text-left">
                    <div class="glass-card p-8 rounded-xl shadow-2xl transition-all duration-300 hover:shadow-lg hover:shadow-cyan-400/30" data-aos="fade-up">
                        <h3 class="text-2xl font-bold text-cyan-400 mb-6">Расходные материалы и Доп. Услуги</h3>
                        <ul class="space-y-4 text-lg">
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Дошиповка зимних шин</span><span class="font-bold">20 ₽ / шип</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Установка вентиля для б/кам. шин</span><span class="font-bold">60 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Установка жгута</span><span class="font-bold">260 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Зачистка диска</span><span class="font-bold">100 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Обработка диска герметиком</span><span class="font-bold">200 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Грибок</span><span class="font-bold">200 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Заплатка (42мм/60мм)</span><span class="font-bold">200 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Заплатка кордовая (15)</span><span class="font-bold">320 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Заплатка кордовая (19)</span><span class="font-bold">420 ₽</span></li>
                            <li class="flex justify-between pt-3 price-list-item"><span>Заплатка кордовая (25)</span><span class="font-bold">520 ₽</span></li>
                        </ul>
                    </div>
                    <div class="glass-card p-8 rounded-xl shadow-2xl transition-all duration-300 hover:shadow-lg hover:shadow-cyan-400/30" data-aos="fade-up" data-aos-delay="200">
                        <h3 class="text-2xl font-bold text-cyan-400 mb-6">Правка и сварка дисков</h3>
                         <ul class="space-y-4 text-lg">
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Правка диска штамп. (R13-R16)</span><span class="font-bold">420 ₽</span></li>
                            <li class="flex justify-between border-b border-gray-700 py-3 price-list-item"><span>Правка диска литой (R13-R18)</span><span class="font-bold">620 - 1040 ₽</span></li>
                            <li class="flex justify-between pt-3 price-list-item"><span>Сварка диска аргоном (за 1 см.)</span><span class="font-bold">200 ₽</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl font-bold mb-6" data-aos="fade-up">Не ждите в очереди!</h2>
                <p class="text-2xl text-gray-300 mb-10" data-aos="fade-up" data-aos-delay="100">Выберите удобный способ связи и запишитесь сейчас.</p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4 max-w-4xl mx-auto" data-aos="fade-up" data-aos-delay="200">
                    <a href="https://wa.me/79027513964" target="_blank" class="bg-green-500 text-white font-bold py-4 px-8 rounded-lg shadow-xl hover:bg-green-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 text-lg">
                        <i data-lucide="smartphone"></i>
                        Написать в WhatsApp
                    </a>
                    <a href="https://t.me/+79027513964" target="_blank" class="bg-blue-500 text-white font-bold py-4 px-8 rounded-lg shadow-xl hover:bg-blue-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 text-lg">
                        <i data-lucide="send"></i>
                        Написать в Telegram
                    </a>
                </div>
                
                <div class="mt-8" data-aos="fade-up" data-aos-delay="300">
                    <p class="text-xl text-gray-400">Или просто позвоните:</p>
                    <a href="tel:+79029093879" class="text-4xl font-bold text-cyan-400 hover:text-cyan-300 transition duration-300 mt-2 inline-block">
                        +7 (902) 909-38-79
                    </a>
                </div>
            </div>
        </section>
        
        <section id="map" class="py-20 bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12" data-aos="fade-up">Мы здесь</h2>
                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <div class="rounded-xl overflow-hidden shadow-2xl sticky top-28" data-aos="fade-right">
                         <div style="width: 100%; height: 400px;">
                            <script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Acc7ed495ed6ddacaeab60edcc7b1c414c118b74ccdccf0d0943bf3296302b918&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>
                        </div>
                    </div>
                    <div data-aos="fade-left" data-aos-delay="100">
                        <h3 class="text-3xl font-bold mb-4">Наш адрес:</h3>
                        <p class="text-2xl text-gray-300 mb-6">Тульская Область, Алексинский Район, Село Поповка, Улица Полевая, 2</p>
                        <h3 class="text-3xl font-bold mb-4">Режим работы:</h3>
                        <p class="text-2xl text-gray-300">Ежедневно с 7:00 до 22:30</p>
                        <p class="text-gray-400 mt-4">(ЗВОНИТЬ ПЕРЕД ПОСЕЩЕНИЕМ, есть возможность договориться раньше/позже.)</p>
                        <a href="tel:+79029093879" class="mt-6 inline-block bg-cyan-400 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-md hover:bg-cyan-300 transition duration-300 transform hover:scale-105">
                            <i data-lucide="phone-call" class="inline-block h-5 w-5 -mt-1 mr-2"></i>
                            Уточнить/Позвонить
                        </a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-900 py-10 border-t border-gray-700" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 "ШинаДом". Все права защищены.</p>
            <p class="text-sm mt-2">Сайт: ШинаДом.рф</p>
            <p class="text-sm mt-2">Информация на сайте не является публичной офертой.</p>
        </div>
    </footer>

    <div id="priceModal" class="fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm p-4 hidden opacity-0 transition-opacity duration-300 ease-in-out">
        <div class="glass-modal w-full max-w-3xl rounded-2xl shadow-2xl p-6 md:p-8 relative overflow-hidden" data-aos="zoom-in" data-aos-duration="300">
            <button id="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-cyan-400 transition-colors z-10">
                <i data-lucide="x" class="h-8 w-8"></i>
            </button>
            
            <div id="quiz-container" class="relative">
                
                <div class="w-full bg-gray-700 rounded-full h-2.5 mb-6 overflow-hidden">
                    <div id="quiz-progress" class="bg-cyan-400 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 20%"></div>
                </div>

                <div id="quiz-step-1" class="quiz-step active">
                    <h3 class="text-2xl md:text-3xl font-bold text-center mb-6 text-cyan-400">1. Что у вас за аппарат?</h3>
                    <div id="car-type-options" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <button class="quiz-option-btn glass-button p-5 border-2 rounded-lg text-lg" data-value="Легковые машины">Легковые машины</button>
                        <button class="quiz-option-btn glass-button p-5 border-2 rounded-lg text-lg" data-value="Паркетники / Кроссоверы">Паркетники / Кроссоверы</button>
                        <button class="quiz-option-btn glass-button p-5 border-2 rounded-lg text-lg" data-value="Внедорожники / Джипы">Внедорожники / Джипы</button>
                        <button class="quiz-option-btn glass-button p-5 border-2 rounded-lg text-lg" data-value="Низкий профиль / RunFlat">Низкий профиль / RunFlat</button>
                        <button class="quiz-option-btn glass-button p-5 border-2 rounded-lg text-lg" data-value="Газель">Газель</button>
                    </div>
                </div>

                <div id="quiz-step-2" class="quiz-step hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-center mb-6 text-cyan-400">2. Какой размер колес?</h3>
                    <div id="tire-size-options" class="flex flex-wrap justify-center gap-3">
                    </div>
                    <div class="flex justify-start mt-6">
                        <button class="quiz-back-btn p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2" data-target="1">
                            <i data-lucide="arrow-left" class="h-5 w-5"></i>
                            Назад
                        </button>
                    </div>
                </div>

                <div id="quiz-step-3" class="quiz-step hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-center mb-6 text-cyan-400">3. Выберите услуги</h3>
                    
                    <div class="space-y-5">
                        <div>
                            <label for="wheelCount" class="block text-lg font-medium text-gray-300 mb-2">А сколько колес <span id="wheel-size-label" class="font-bold text-cyan-400"></span>?</label>
                            <input type="number" id="wheelCount" value="4" min="1" max="8" class="block w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white focus:border-cyan-400 focus:ring-cyan-400 text-lg">
                        </div>

                        <div class="relative">
                            <button id="complex-btn" class="w-full bg-cyan-400 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-cyan-300 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2 text-lg">
                                <i data-lucide="star"></i>
                                Выбрать "Комплекс" (4 колеса)
                            </button>
                            <button id="complex-reset-btn" class="w-full bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-gray-500 transition duration-300 flex items-center justify-center gap-2 text-lg hidden">
                                <i data-lucide="x-circle"></i>
                                Сбросить комплекс
                            </button>
                        </div>
                        
                        <div class="flex items-center">
                           <span class="flex-grow border-t border-gray-700"></span>
                           <span class="px-3 text-gray-400">ИЛИ</span>
                           <span class="flex-grow border-t border-gray-700"></span>
                        </div>

                        <div id="individualServices" class="space-y-3 p-4 glass-card rounded-lg">
                            <p class="text-lg font-medium text-gray-300 mb-3">Выберите услуги:</p>
                            <div class="flex items-center border-b border-gray-700 pb-3 mb-3">
                                <input id="check-all-services" type="checkbox" class="h-5 w-5 text-cyan-400 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
                                <label for="check-all-services" class="ml-3 block text-md font-bold text-white">Выбрать все</label>
                            </div>
                            <div class="flex items-center">
                                <input id="check-moyka" name="service" type="checkbox" class="h-5 w-5 text-cyan-400 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
                                <label for="check-moyka" class="ml-3 block text-md text-gray-300">Мойка колеса (улучшает точность)</label>
                            </div>
                            <div class="flex items-center">
                                <input id="check-shinomontazh" name="service" type="checkbox" class="h-5 w-5 text-cyan-400 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
                                <label for="check-shinomontazh" class="ml-3 block text-md text-gray-300">Шиномонтаж (за 1 колесо)</label>
                            </div>
                            <div class="flex items-center">
                                <input id="check-balansirovka" name="service" type="checkbox" class="h-5 w-5 text-cyan-400 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
                                <label for="check-balansirovka" class="ml-3 block text-md text-gray-300">Балансировка (за 1 колесо)</label>
                            </div>
                            <div class="flex items-center">
                                <input id="check-snyatie" name="service" type="checkbox" class="h-5 w-5 text-cyan-400 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
                                <label for="check-snyatie" class="ml-3 block text-md text-gray-300">Снятие/Установка (за 1 колесо)</label>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between mt-6">
                        <button class="quiz-back-btn p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2" data-target="2">
                            <i data-lucide="arrow-left" class="h-5 w-5"></i>
                            Назад
                        </button>
                        <button id="quiz-to-confirm" class="p-3 px-6 bg-green-500 hover:bg-green-400 rounded-lg transition-colors flex items-center gap-2 text-lg font-bold">
                            Далее
                            <i data-lucide="arrow-right" class="h-5 w-5"></i>
                        </button>
                    </div>
                </div>
                
                <div id="quiz-step-4" class="quiz-step hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-center mb-6 text-cyan-400">4. Проверьте ваш выбор</h3>
                    <div class="glass-card rounded-lg p-5 space-y-3 text-lg">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Аппарат:</span>
                            <span id="summary-car-type" class="font-bold"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Размер:</span>
                            <span id="summary-tire-size" class="font-bold"></span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Количество:</span>
                            <span id="summary-wheel-count" class="font-bold"></span>
                        </div>
                        <hr class="border-gray-700">
                        <div>
                            <span class="text-gray-400">Услуги:</span>
                            <ul id="summary-services" class="list-disc list-inside pl-2 font-bold mt-2">
                            </ul>
                        </div>
                    </div>
                    <div class="flex justify-between mt-6">
                        <button class="quiz-back-btn p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2" data-target="3">
                            <i data-lucide="arrow-left" class="h-5 w-5"></i>
                            Назад
                        </button>
                        <button id="quiz-confirm" class="p-3 px-6 bg-cyan-400 text-gray-900 hover:bg-cyan-300 rounded-lg transition-colors flex items-center gap-2 text-lg font-bold">
                            Подтвердить
                            <i data-lucide="check" class="h-5 w-5"></i>
                        </button>
                    </div>
                </div>
                
                <div id="quiz-step-5" class="quiz-step hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-center mb-6 text-cyan-400">Итоговая стоимость</h3>
                    
                    <div class="text-center py-8">
                        <p class="text-5xl md:text-6xl font-black text-cyan-400">
                            <span id="priceResult">0</span> ₽
                        </p>
                        <p id="priceNote" class="text-lg text-gray-400 mt-2"></p>
                    </div>
                    
                    <div class="pt-4 space-y-3">
                        <p class="text-center text-lg text-gray-300">Отлично! Свяжитесь с нами для записи:</p>
                        <div class="flex flex-col sm:flex-row justify-center gap-3">
                            <a href="tel:+79029093879" class="w-full sm:w-auto flex-1 bg-cyan-400 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-cyan-300 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                                <i data-lucide="phone-call"></i>
                                Позвонить
                            </a>
                            <a href="https://wa.me/79027513964" target="_blank" class="w-full sm:w-auto flex-1 bg-green-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-green-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                                <i data-lucide="smartphone"></i>
                                WhatsApp
                            </a>
                            <a href="https://t.me/+79027513964" target="_blank" class="w-full sm:w-auto flex-1 bg-blue-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-blue-400 transition duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                                <i data-lucide="send"></i>
                                Telegram
                            </a>
                        </div>
                    </div>
                    
                    <div class="flex justify-start mt-8">
                        <button class="quiz-back-btn p-3 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors flex items-center gap-2" data-target="4">
                            <i data-lucide="arrow-left" class="h-5 w-5"></i>
                            Назад
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        const lenis = new Lenis()

        function raf(time) {
          lenis.raf(time)
          requestAnimationFrame(raf)
        }

        requestAnimationFrame(raf)

        document.addEventListener('DOMContentLoaded', () => {
            
            const progressBar = document.getElementById('scroll-progress-bar');
            
            const wheel = document.getElementById('wheel');
            const wheelGroup = document.getElementById('wheel-group');
            const wheelContainer = document.getElementById('why-us-container');
            let wheelElementsFound = wheel && wheelContainer && wheelGroup;
            
            let startScale, startRotateX, startRotateZInitial, endScale, endRotateX, lerp;
            let containerTop = 0;
            let containerHeight = 0;
            let viewportHeight = 0;
            let animStart = 0;
            let animDuration = 0;
            
            if (wheelElementsFound) {
                startScale = 0.05;
                startRotateX = 70;
                startRotateZInitial = -720; 
                endScale = 1;
                endRotateX = 0;
                
                wheel.style.opacity = 0;
                wheel.style.transform = `scale(${startScale}) rotateX(${startRotateX}deg) rotateZ(${startRotateZInitial}deg)`;
                wheel.style.transformOrigin = 'center center';
                wheel.style.willChange = 'transform, opacity';
                
                lerp = (a, b, t) => a + (b - a) * t;
                
                const containerRect = wheelContainer.getBoundingClientRect();
                containerTop = containerRect.top + window.scrollY; 
                containerHeight = wheelContainer.offsetHeight;
                viewportHeight = window.innerHeight;
                animStart = containerTop;
                animDuration = containerHeight - viewportHeight;
            }
            
            const easeOutQuad = (t) => t * (2 - t);
            
            let hasWheelRolledAway = false;

            lenis.on('scroll', (e) => {
                const scrollTop = e.animatedScroll;
                const docHeight = document.documentElement.scrollHeight;
                const clientHeight = document.documentElement.clientHeight;
                
                let scrollPercent = 0;
                if ((docHeight - clientHeight) > 0) {
                    scrollPercent = (scrollTop / (docHeight - clientHeight));
                }
                if (progressBar) {
                    progressBar.style.width = (scrollPercent * 100) + '%';
                }

                if (wheelElementsFound) {
                    
                    if (hasWheelRolledAway) {
                        return;
                    }

                    let animProgress = 0;
                    if (scrollTop >= animStart) {
                        animProgress = (scrollTop - animStart) / animDuration;
                    } else {
                        animProgress = 0;
                    }

                    if (animProgress <= 1.0) {
                        const buildUpProgress = Math.max(0, Math.min(1, animProgress));
                        
                        const currentOpacity = buildUpProgress;
                        const currentScale = lerp(startScale, endScale, buildUpProgress);
                        const currentRotateX = lerp(startRotateX, endRotateX, buildUpProgress);
                        const combinedRotateZ = lerp(startRotateZInitial, 0, buildUpProgress);

                        wheel.style.transition = 'none';
                        wheel.style.opacity = currentOpacity;
                        wheel.style.transform = `scale(${currentScale}) rotateX(${currentRotateX}deg) rotateZ(${combinedRotateZ}deg) translateX(0px)`;
                        
                        wheelGroup.classList.remove('spinning-group');

                    } else if (animProgress > 1.0 && !hasWheelRolledAway) {
                        hasWheelRolledAway = true; 
                        
                        wheel.style.transition = 'none';
                        wheel.style.opacity = 1; 
                        wheel.style.transform = 'scale(1) rotateX(0deg) rotateZ(0deg) translateX(0px)';
                        
                        wheelGroup.classList.add('spinning-group');
                        
                        setTimeout(() => {
                            wheel.style.transition = 'transform 2.0s cubic-bezier(0.5, 0, 0.8, 0.5)'; 
                            wheel.style.transform = 'scale(1) rotateX(0deg) rotateZ(0deg) translateX(150vw)'; 
                        }, 0); 
                    }
                }
            });

            const priceData = {
                "Легковые машины": {
                    "R14": { "shinomontazh": 100, "balansirovka": 240, "snyatie": 160, "moyka": 80, "complex": 2380 },
                    "R15": { "shinomontazh": 100, "balansirovka": 260, "snyatie": 180, "moyka": 100, "complex": 2520 },
                    "R16": { "shinomontazh": 120, "balansirovka": 280, "snyatie": 200, "moyka": 100, "complex": 2780 },
                    "R17": { "shinomontazh": 140, "balansirovka": 320, "snyatie": 220, "moyka": 120, "complex": 3100 },
                    "R18": { "shinomontazh": 140, "balansirovka": 320, "snyatie": 220, "moyka": 120, "complex": 3200 },
                    "R19": { "shinomontazh": 160, "balansirovka": 360, "snyatie": 240, "moyka": 140, "complex": 3620 },
                    "R20": { "shinomontazh": 180, "balansirovka": 400, "snyatie": 280, "moyka": 160, "complex": 4080 }
                },
                "Внедорожники / Джипы": {
                    "R15": { "shinomontazh": 120, "balansirovka": 280, "snyatie": 200, "moyka": 100, "complex": 2840 },
                    "R16": { "shinomontazh": 120, "balansirovka": 280, "snyatie": 200, "moyka": 100, "complex": 2840 },
                    "R17": { "shinomontazh": 140, "balansirovka": 320, "snyatie": 220, "moyka": 120, "complex": 3240 },
                    "R18": { "shinomontazh": 160, "balansirovka": 340, "snyatie": 240, "moyka": 140, "complex": 3480 },
                    "R19": { "shinomontazh": 180, "balansirovka": 380, "snyatie": 260, "moyka": 140, "complex": 3880 },
                    "R20": { "shinomontazh": 180, "balansirovka": 420, "snyatie": 280, "moyka": 160, "complex": 4120 },
                    "R21": { "shinomontazh": 200, "balansirovka": 440, "snyatie": 300, "moyka": 160, "complex": 4420 },
                    "R22": { "shinomontazh": 200, "balansirovka": 460, "snyatie": 320, "moyka": 180, "complex": 4660 }
                },
                "Паркетники / Кроссоверы": {
                    "R15": { "shinomontazh": 140, "balansirovka": 300, "snyatie": 200, "moyka": 100, "complex": 2960 },
                    "R16": { "shinomontazh": 140, "balansirovka": 300, "snyatie": 200, "moyka": 100, "complex": 2960 },
                    "R17": { "shinomontazh": 140, "balansirovka": 320, "snyatie": 220, "moyka": 120, "complex": 3240 },
                    "R18": { "shinomontazh": 160, "balansirovka": 360, "snyatie": 240, "moyka": 140, "complex": 3520 },
                    "R19": { "shinomontazh": 160, "balansirovka": 380, "snyatie": 260, "moyka": 140, "complex": 3820 },
                    "R20": { "shinomontazh": 180, "balansirovka": 400, "snyatie": 280, "moyka": 160, "complex": 4080 },
                    "R21": { "shinomontazh": 200, "balansirovka": 440, "snyatie": 300, "moyka": 160, "complex": 4360 }
                },
                "Низкий профиль / RunFlat": {
                    "R16": { "shinomontazh": 160, "balansirovka": 360, "snyatie": 240, "moyka": 140, "complex": 3600 },
                    "R17": { "shinomontazh": 180, "balansirovka": 380, "snyatie": 260, "moyka": 140, "complex": 3900 },
                    "R18": { "shinomontazh": 180, "balansirovka": 420, "snyatie": 280, "moyka": 160, "complex": 4140 },
                    "R19": { "shinomontazh": 200, "balansirovka": 460, "snyatie": 300, "moyka": 180, "complex": 4580 },
                    "R20": { "shinomontazh": 220, "balansirovka": 520, "snyatie": 340, "moyka": 200, "complex": 5120 }
                },
                "Газель": {
                    "R16": { "shinomontazh": 280, "balansirovka": 280, "snyatie": 220, "moyka": 320, "complex": 4320 }
                }
            };

            let quizState = {
                carType: null,
                tireSize: null,
                wheelCount: 4,
                isComplex: false,
                services: []
            };

            const modal = document.getElementById('priceModal');
            const openBtn = document.getElementById('openPriceCalculator');
            const closeBtn = document.getElementById('closeModal');
            const quizProgress = document.getElementById('quiz-progress');
            
            const steps = {
                1: document.getElementById('quiz-step-1'),
                2: document.getElementById('quiz-step-2'),
                3: document.getElementById('quiz-step-3'),
                4: document.getElementById('quiz-step-4'),
                5: document.getElementById('quiz-step-5'),
            };

            const carTypeOptions = document.getElementById('car-type-options');
            const tireSizeOptions = document.getElementById('tire-size-options');
            const wheelCountInput = document.getElementById('wheelCount');
            const wheelSizeLabel = document.getElementById('wheel-size-label');
            
            const complexBtn = document.getElementById('complex-btn');
            const complexResetBtn = document.getElementById('complex-reset-btn');
            
            const checkAllServices = document.getElementById('check-all-services');
            const serviceChecks = {
                moyka: document.getElementById('check-moyka'),
                shinomontazh: document.getElementById('check-shinomontazh'),
                balansirovka: document.getElementById('check-balansirovka'),
                snyatie: document.getElementById('check-snyatie')
            };
            
            const toConfirmBtn = document.getElementById('quiz-to-confirm');
            const confirmBtn = document.getElementById('quiz-confirm');
            const backBtns = document.querySelectorAll('.quiz-back-btn');

            const summary = {
                carType: document.getElementById('summary-car-type'),
                tireSize: document.getElementById('summary-tire-size'),
                wheelCount: document.getElementById('summary-wheel-count'),
                services: document.getElementById('summary-services'),
            };

            const priceResultEl = document.getElementById('priceResult');
            const priceNoteEl = document.getElementById('priceNote');

            function showStep(stepNum, direction = 'forward') {
                Object.values(steps).forEach(step => {
                    step.classList.remove('active', 'hidden-left');
                    step.classList.add('hidden');
                });

                if (direction === 'forward') {
                    steps[stepNum].classList.remove('hidden');
                    steps[stepNum].classList.add('active');
                } else {
                    Object.values(steps).forEach(step => step.classList.remove('active'));
                    steps[stepNum].classList.remove('hidden');
                    steps[stepNum].classList.add('active');
                    
                    if(steps[stepNum+1]) {
                        steps[stepNum+1].classList.add('hidden-left');
                    }
                }
                
                const progress = (stepNum / 5) * 100;
                quizProgress.style.width = `${progress}%`;
            }
            
            function resetQuiz() {
                quizState = { carType: null, tireSize: null, wheelCount: 4, isComplex: false, services: [] };
                wheelCountInput.value = 4;
                resetComplex();
                
                document.querySelectorAll('.quiz-option-btn.selected').forEach(btn => btn.classList.remove('selected'));
                tireSizeOptions.innerHTML = '';
                showStep(1);
            }

            openBtn.addEventListener('click', () => {
                resetQuiz();
                modal.classList.remove('hidden');
                setTimeout(() => modal.classList.remove('opacity-0'), 10);
            });
            
            function closeModal() {
                 modal.classList.add('opacity-0');
                setTimeout(() => modal.classList.add('hidden'), 300);
            }
            
            closeBtn.addEventListener('click', closeModal);
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            carTypeOptions.addEventListener('click', (e) => {
                const target = e.target.closest('.quiz-option-btn');
                if (target) {
                    quizState.carType = target.dataset.value;
                    
                    document.querySelectorAll('#car-type-options .quiz-option-btn').forEach(btn => btn.classList.remove('selected'));
                    target.classList.add('selected');
                    
                    updateTireSizes();
                    showStep(2);
                }
            });
            
            function updateTireSizes() {
                tireSizeOptions.innerHTML = '';
                if (quizState.carType && priceData[quizState.carType]) {
                    const sizes = Object.keys(priceData[quizState.carType]);
                    sizes.forEach(size => {
                        const btn = document.createElement('button');
                        btn.type = 'button';
                        btn.className = 'quiz-option-btn glass-button p-4 border-2 rounded-lg text-md';
                        btn.dataset.value = size;
                        btn.textContent = size;
                        tireSizeOptions.appendChild(btn);
                    });
                }
            }

            tireSizeOptions.addEventListener('click', (e) => {
                const target = e.target.closest('.quiz-option-btn');
                if (target) {
                    quizState.tireSize = target.dataset.value;
                    
                    document.querySelectorAll('#tire-size-options .quiz-option-btn').forEach(btn => btn.classList.remove('selected'));
                    target.classList.add('selected');

                    wheelSizeLabel.textContent = quizState.tireSize;
                    showStep(3);
                }
            });
            
            backBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetStep = parseInt(btn.dataset.target);
                    showStep(targetStep, 'backward');
                });
            });

            checkAllServices.addEventListener('click', () => {
                const isChecked = checkAllServices.checked;
                Object.values(serviceChecks).forEach(check => {
                    check.checked = isChecked;
                });
            });

            Object.values(serviceChecks).forEach(check => {
                check.addEventListener('click', () => {
                    if (!check.checked) {
                        checkAllServices.checked = false;
                    } else {
                        const allChecked = Object.values(serviceChecks).every(c => c.checked);
                        if (allChecked) {
                            checkAllServices.checked = true;
                        }
                    }
                });
            });

            complexBtn.addEventListener('click', (e) => {
                e.preventDefault();
                quizState.isComplex = true;
                
                let currentCount = parseInt(wheelCountInput.value) || 0;
                if (currentCount < 4) {
                    wheelCountInput.value = 4;
                }
                quizState.wheelCount = parseInt(wheelCountInput.value);
                
                if (quizState.wheelCount < 4) {
                    quizState.wheelCount = 4;
                    wheelCountInput.value = 4;
                }

                wheelCountInput.disabled = true;
                
                quizState.services = ['moyka', 'shinomontazh', 'balansirovka', 'snyatie'];
                Object.values(serviceChecks).forEach(check => {
                    check.checked = true;
                    check.disabled = true;
                    check.parentElement.classList.add('opacity-50');
                });
                
                checkAllServices.checked = true;
                checkAllServices.disabled = true;
                checkAllServices.parentElement.classList.add('opacity-50');
                
                complexBtn.classList.add('hidden');
                complexResetBtn.classList.remove('hidden');
            });
            
            function resetComplex() {
                quizState.isComplex = false;
                wheelCountInput.disabled = false;
                quizState.services = [];
                Object.values(serviceChecks).forEach(check => {
                    check.checked = false;
                    check.disabled = false;
                    check.parentElement.classList.remove('opacity-50');
                });
                
                checkAllServices.checked = false;
                checkAllServices.disabled = false;
                checkAllServices.parentElement.classList.remove('opacity-50');
                
                complexBtn.classList.remove('hidden');
                complexResetBtn.classList.add('hidden');
            }

            complexResetBtn.addEventListener('click', (e) => {
                e.preventDefault();
                resetComplex();
            });

            toConfirmBtn.addEventListener('click', () => {
                if (!quizState.isComplex) {
                    quizState.wheelCount = parseInt(wheelCountInput.value) || 0;
                    quizState.services = [];
                    if(serviceChecks.moyka.checked) quizState.services.push('moyka');
                    if(serviceChecks.shinomontazh.checked) quizState.services.push('shinomontazh');
                    if(serviceChecks.balansirovka.checked) quizState.services.push('balansirovka');
                    if(serviceChecks.snyatie.checked) quizState.services.push('snyatie');
                }
                
                updateSummary();
                showStep(4);
            });
            
            function updateSummary() {
                summary.carType.textContent = quizState.carType;
                summary.tireSize.textContent = quizState.tireSize;
                summary.wheelCount.textContent = quizState.wheelCount;
                
                summary.services.innerHTML = '';
                if (quizState.isComplex) {
                    const li = document.createElement('li');
                    li.textContent = `Комплекс (${quizState.wheelCount} колеса)`;
                    summary.services.appendChild(li);
                } else if (quizState.services.length > 0) {
                    quizState.services.forEach(serviceKey => {
                        const li = document.createElement('li');
                        const label = document.querySelector(`label[for="check-${serviceKey}"]`);
                        li.textContent = label ? label.textContent.split('(')[0].trim() : serviceKey;
                        summary.services.appendChild(li);
                    });
                } else {
                     const li = document.createElement('li');
                    li.textContent = 'Услуги не выбраны';
                    summary.services.appendChild(li);
                }
            }

            confirmBtn.addEventListener('click', () => {
                calculatePrice();
                showStep(5);
            });

            function animateValue(obj, start, end, duration) {
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    obj.innerHTML = Math.floor(progress * (end - start) + start).toLocaleString('ru-RU');
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }

            const calculatePrice = () => {
                const { carType, tireSize, wheelCount, isComplex, services } = quizState;
                priceResultEl.textContent = '0';
                
                if (!carType || !tireSize) {
                    priceResultEl.textContent = 'N/A';
                    priceNoteEl.textContent = 'Ошибка в данных';
                    return;
                }
                
                const prices = priceData[carType][tireSize];
                if (!prices) {
                    priceResultEl.textContent = 'N/A';
                    priceNoteEl.textContent = 'Данные не найдены';
                    return;
                }

                let totalPrice = 0;
                
                if (isComplex) {
                    if (prices.complex && wheelCount === 4) {
                        totalPrice = prices.complex;
                        priceNoteEl.textContent = `Цена за "Комплекс" (4 колеса)`;
                    } else {
                        totalPrice += (prices.shinomontazh || 0) * wheelCount;
                        totalPrice += (prices.balansirovka || 0) * wheelCount;
                        totalPrice += (prices.snyatie || 0) * wheelCount;
                        totalPrice += (prices.moyka || 0) * wheelCount;
                        priceNoteEl.textContent = `Цена за ${wheelCount} колес(а) (все услуги)`;
                    }
                } else {
                    if (services.includes('shinomontazh')) totalPrice += (prices.shinomontazh || 0) * wheelCount;
                    if (services.includes('balansirovka')) totalPrice += (prices.balansirovka || 0) * wheelCount;
                    if (services.includes('snyatie')) totalPrice += (prices.snyatie || 0) * wheelCount;
                    if (services.includes('moyka')) totalPrice += (prices.moyka || 0) * wheelCount;
                    priceNoteEl.textContent = `Цена за ${wheelCount} колес(а)`;
                }
                
                if(wheelCount === 0 || (!isComplex && services.length === 0)) {
                    totalPrice = 0;
                    priceNoteEl.textContent = 'Услуги или количество не выбраны';
                }
                
                animateValue(priceResultEl, 0, totalPrice, 500);
            };
            
        });
        
        AOS.init({
            duration: 800,
            once: true,
            offset: 50,
        });
        lucide.createIcons();
    </script>
</body>
</html>


